-- Create and populate our products using a single insert with many rows
CREATE TABLE PRODUCTS (
    ID NUMBER(4) GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 101) NOT NULL PRIMARY KEY,
    NAME VARCHAR2(255) NOT NULL,
    DESCRIPTION VARCHAR2(512),
    WEIGHT FLOAT
);

GRANT SELECT ON PRODUCTS TO C##DBZUSER;

ALTER TABLE PRODUCTS ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;

INSERT INTO PRODUCTS VALUES (
    NULL,
    'scooter',
    'Small 2-wheel scooter',
    3.14
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'car battery',
    '12V car battery',
    8.1
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    '12-pack drill bits',
    '12-pack of drill bits with sizes ranging from #40 to #3',
    0.8
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'hammer',
    '12oz carpenter''s hammer',
    0.75
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'hammer',
    '14oz carpenter''s hammer',
    0.875
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'hammer',
    '16oz carpenter''s hammer',
    1.0
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'rocks',
    'box of assorted rocks',
    5.3
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'jacket',
    'water resistent black wind breaker',
    0.1
);

INSERT INTO PRODUCTS VALUES (
    NULL,
    'spare tire',
    '24 inch spare tire',
    22.2
);

-- Create and populate the products on hand using multiple inserts
CREATE TABLE PRODUCTS_ON_HAND (
    PRODUCT_ID NUMBER(4) NOT NULL PRIMARY KEY,
    QUANTITY NUMBER(4) NOT NULL,
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS (ID)
);

GRANT SELECT ON PRODUCTS_ON_HAND TO C##DBZUSER;

ALTER TABLE PRODUCTS_ON_HAND ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;

INSERT INTO PRODUCTS_ON_HAND VALUES (
    101,
    3
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    102,
    8
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    103,
    18
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    104,
    4
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    105,
    5
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    106,
    0
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    107,
    44
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    108,
    2
);

INSERT INTO PRODUCTS_ON_HAND VALUES (
    109,
    5
);

-- Create some customers ...
CREATE TABLE CUSTOMERS (
    ID NUMBER(4) GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1001) NOT NULL PRIMARY KEY,
    FIRST_NAME VARCHAR2(255) NOT NULL,
    LAST_NAME VARCHAR2(255) NOT NULL,
    EMAIL VARCHAR2(255) NOT NULL UNIQUE
);

GRANT SELECT ON CUSTOMERS TO C##DBZUSER;

ALTER TABLE CUSTOMERS ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;

INSERT INTO CUSTOMERS VALUES (
    NULL,
    'Sally',
    'Thomas',
    'sally.thomas@acme.com'
);

INSERT INTO CUSTOMERS VALUES (
    NULL,
    'George',
    'Bailey',
    'gbailey@foobar.com'
);

INSERT INTO CUSTOMERS VALUES (
    NULL,
    'Edward',
    'Walker',
    'ed@walker.com'
);

INSERT INTO CUSTOMERS VALUES (
    NULL,
    'Anne',
    'Kretchmar',
    'annek@noanswer.org'
);

-- Create some very simple orders
CREATE TABLE DEBEZIUM.ORDERS (
    ID NUMBER(6) GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 10001) NOT NULL PRIMARY KEY,
    ORDER_DATE DATE NOT NULL,
    PURCHASER NUMBER(4) NOT NULL,
    QUANTITY NUMBER(4) NOT NULL,
    PRODUCT_ID NUMBER(4) NOT NULL,
    FOREIGN KEY (PURCHASER) REFERENCES CUSTOMERS (ID),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS (ID)
);

GRANT SELECT ON ORDERS TO C##DBZUSER;

ALTER TABLE ORDERS ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;

INSERT INTO ORDERS VALUES (
    NULL,
    '16-JAN-2016',
    1001,
    1,
    102
);

INSERT INTO ORDERS VALUES (
    NULL,
    '17-JAN-2016',
    1002,
    2,
    105
);

INSERT INTO ORDERS VALUES (
    NULL,
    '19-FEB-2016',
    1002,
    2,
    106
);

INSERT INTO ORDERS VALUES (
    NULL,
    '21-FEB-2016',
    1003,
    1,
    107
);
